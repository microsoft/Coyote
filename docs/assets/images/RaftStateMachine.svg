<?xml version="1.0" encoding="utf-8"?>
<svg stroke-linecap="round" font-size="12" font-family="Segoe UI" width="722.61666666666667" height="431.28750000000036" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
  <defs />
  <rect width="722.61666666666667" height="431.28750000000036" fill="#FFFFFF" />
  <g transform="translate(20,20)">
    <g id="Microsoft.Coyote.Samples.CloudMessaging.Server">
      <rect rx="5" ry="5" width="682.61666666666667" height="391.28750000000036" fill="#EEEEEE" stroke="#A5A6A9" stroke-width="1" />
      <text x="209" y="17.950000000000003" fill="#000000">Microsoft.Coyote.Samples.CloudMessaging.Server</text>
      <rect x="5" y="27.96" width="672.61666666666667" height="358.32750000000038" fill="#FFFFFF" stroke="#A5A6A9" stroke-width="1" />
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower">
        <path d="M 104.640969273261,131.5875 L 128.695,176.5375 C 149.361666666667,215.1575 172.861666666667,240.460833333334 199.195,252.4475 L 201.988118538493,253.718899273978" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 210.179427141268,257.4475 L 202.735129016417,249.664028703186 C 202.540503831237,252.505372073566 201.435733245749,254.932426474389 199.420817259952,256.945191905653 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
        <text x="119.57500000000027" y="203.47750000000036" fill="#A0A0A0">demoted</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Leader">
        <path d="M 115.446740251859,131.5875 L 127.741666666667,140.5775 C 147.772777777778,155.224166666667 171.272777777778,168.540833333334 198.241666666667,180.5275 L 203.476044266512,182.853985891032" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 211.700292312518,186.509357838969 L 204.186848682705,178.792612098592 C 204.017580851391,181.635578773105 202.934507681632,184.072393008959 200.937629173428,186.103054806153 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
        <text x="157.78833333333387" y="167.5175000000001" fill="#A0A0A0">majority of votes</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Follower-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate">
        <path d="M 206.266666666667,263.402663453816 L 155.695,252.4475 C 100.361666666667,240.460833333334 72.6950000000001,222.480833333334 72.6950000000001,198.507500000001 C 72.6950000000001,174.534166666667 76.8616666666668,155.224166666667 85.1950000000001,140.5775 L 85.8592575817727,139.410000874276" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 90.3099294492491,131.5875 L 81.8880714301525,138.30109125254 C 84.7003685633614,138.750642079095 87.0181466001841,140.069359669458 88.8414055406204,142.25724402363 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
        <text x="31.221666666666806" y="203.47750000000036" fill="#A0A0A0">timeout</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Init-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower">
        <path d="M 516.695,205.370095419848 L 476.195,216.4875 C 432.528333333333,228.474166666667 382.028333333333,240.460833333334 324.695,252.4475 L 279.932859548873,261.805910294317" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 271.123333333334,263.647715891473 L 281.730276060447,265.516610212651 C 280.205719637341,263.111025289212 279.659999460406,260.500795299423 280.093115529642,257.685920243282 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
        <text x="277.55166666666696" y="239.4375000000004" fill="#A0A0A0">NotifyJoinedServiceEvent</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Leader-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower">
        <path d="M 238.695,211.4875 L 238.695,248.4475" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 238.695,257.4475 L 242.695,247.4475 C 240.028333333333,248.4475 237.361666666667,248.4475 234.695,247.4475 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
        <text x="190.57500000000027" y="239.4375000000004" fill="#A0A0A0">demoted</text>
      </g>
      <g id="944b151a-5736-40d5-8851-dff5e6bb6c201-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Init">
        <path d="M 541.695,139.5675 L 541.695,176.5275" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 541.695,185.5275 L 545.695,175.5275 C 543.028333333333,176.5275 540.361666666667,176.5275 537.695,175.5275 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
      </g>
      <g id="SendsVoteRequestEvents-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate">
        <path d="M 97.6950000000001,65.9599999999999 L 97.6950000000001,96.6275000000001" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 97.6950000000001,105.6275 L 101.695,95.6275000000001 C 99.0283333333334,96.6275000000001 96.3616666666668,96.6275000000001 93.6950000000001,95.6275000000001 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
      </g>
      <g id="HandlesClientRequestEvent-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Leader">
        <path d="M 277.695,139.5675 L 277.695,140.5775 C 277.695,154.772736141042 271.589503256527,167.71869371765 259.378509769582,179.415372729824" fill="none" stroke="#A0A0A0" stroke-width="1" />
        <path d="M 252.772308120134,185.5275 L 262.829033184043,181.672337099559 C 260.284010105904,180.394069270483 258.473009433259,178.436676189165 257.396031166109,175.800157855606 z" fill="#A0A0A0" stroke="#A0A0A0" stroke-width="1" stroke-linejoin="round" />
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate">
        <rect x="60.786666666666804" y="105.62750000000006" rx="3" ry="3" width="73.8166666666666" height="25.960000000000036" fill="#FFFFFF" stroke="#A5A6A9" stroke-width="1" />
        <text x="70.7866666666668" y="123.57750000000006" fill="#3D3D3D">Candidate</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Follower">
        <rect x="206.26666666666671" y="257.44750000000045" rx="3" ry="3" width="64.856666666666683" height="25.960000000000036" fill="#FFFFFF" stroke="#A5A6A9" stroke-width="1" />
        <text x="216.26666666666671" y="275.39750000000043" fill="#3D3D3D">Follower</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Init">
        <rect x="516.695" y="185.52750000000037" rx="3" ry="3" width="50" height="25.960000000000036" fill="#FFFFFF" stroke="#A5A6A9" stroke-width="1" />
        <text x="532.695" y="203.47750000000036" fill="#3D3D3D">Init</text>
      </g>
      <g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Leader">
        <rect x="210.92000000000013" y="185.52750000000037" rx="3" ry="3" width="55.549999999999955" height="25.960000000000036" fill="#FFFFFF" stroke="#A5A6A9" stroke-width="1" />
        <text x="220.92000000000013" y="203.47750000000036" fill="#3D3D3D">Leader</text>
      </g>
      <g id="944b151a-5736-40d5-8851-dff5e6bb6c201">
        <rect x="420.77333333333343" y="97.647500000000036" rx="2" ry="2" width="241.84333333333336" height="41.920000000000016" fill="#FFFACD" stroke="#E5C365" stroke-width="1" />
        <g>
          <text x="430.77333333333343" y="115.59750000000004" fill="#3D3D3D">Start state where all events are deferred </text>
          <text x="430.77333333333343" y="131.55750000000003" fill="#3D3D3D">until we get the NotifyJoinedServiceEvent.</text>
        </g>
      </g>
      <g id="SendsVoteRequestEvents">
        <rect x="20" y="40" rx="2" ry="2" width="155.39" height="25.960000000000008" fill="#FFFACD" stroke="#E5C365" stroke-width="1" />
        <text x="30" y="57.95" fill="#3D3D3D">Sends VoteRequestEvents</text>
      </g>
      <g id="SendsVoteResponseEvents">
        <rect x="291.41999999999996" y="313.40750000000048" rx="2" ry="2" width="240.59000000000003" height="41.920000000000073" fill="#FFFACD" stroke="#E5C365" stroke-width="1" />
        <g>
          <text x="301.41999999999996" y="331.35750000000047" fill="#3D3D3D">Any state handles VoteRequestEvents and </text>
          <text x="301.41999999999996" y="347.31750000000045" fill="#3D3D3D">sends back VoteResponseEvents.</text>
        </g>
      </g>
      <g id="HandlesClientRequestEvent">
        <rect x="165.38166666666677" y="97.647500000000036" rx="2" ry="2" width="224.62666666666667" height="41.920000000000016" fill="#FFFACD" stroke="#E5C365" stroke-width="1" />
        <g>
          <text x="175.38166666666677" y="115.59750000000004" fill="#3D3D3D">Handles ClientRequestEvent and sends </text>
          <text x="175.38166666666677" y="131.55750000000003" fill="#3D3D3D">AppendLogEntriesRequestEvent</text>
        </g>
      </g>
      <g id="AnyStateExceptInitCanHandleAppendLogEntriesResponseEvent">
        <rect x="20" y="313.40750000000048" rx="2" ry="2" width="241.42000000000007" height="57.879999999999995" fill="#FFFACD" stroke="#E5C365" stroke-width="1" />
        <g>
          <text x="30" y="331.35750000000047" fill="#3D3D3D">Any state except Init can handle </text>
          <text x="30" y="347.31750000000045" fill="#3D3D3D">AppendLogEntriesRequestEvents, sending </text>
          <text x="30" y="363.27750000000043" fill="#3D3D3D">back AppendLogEntriesResponseEvents</text>
        </g>
      </g>
    </g>
  </g>
</svg>